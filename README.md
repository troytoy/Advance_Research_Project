# Forex Trading: MACD Strategy Enhancement with Machine Learning

## Overview
This project serves as a proof-of-concept for a hybrid trading system that combines **Genetic Algorithms (GA)** for parameter optimization and **Machine Learning/Deep Learning (RF/LSTM)** for signal filtering. The goal is to first find a robust technical strategy and then use AI to filter out false signals.

---

## File Structure & Description

### 1. Main Notebook
- **`final_project.ipynb`**: 
  - The core Jupyter Notebook that consolidates the entire workflow.
  - It demonstrates the step-by-step process: Loading Data -> Optimization (GA) -> Feature Engineering -> Signal Filtering (ML/DL).
  - Use this file for presentation or interactive experimentation.

### 2. Core Modules
- **`data_loader.py`**: 
  - Handles fetching historical data from Yahoo Finance (`yfinance`).
  - Prepares the data structure (cleaning, calculating returns) for the strategy.
- **`strategy.py`**: 
  - Contains the logic for the **MACD Strategy**.
  - Provides methods to generate buy/sell signals based on `Fast`, `Slow`, and `Signal` periods.
  - Includes an evaluation function (fitness function) for the Genetic Algorithm.

### 3. Optimization & AI Models
- **`ga_optimizer.py`**: 
  - Uses the `DEAP` library to run a Genetic Algorithm.
  - Evolves the MACD parameters (`Fast`, `Slow`, `Signal`) to maximize the total return.
- **`ml_filter.py`**: 
  - Implements a **Random Forest Classifier** (`scikit-learn`).
  - Analyzes a "snapshot" of technical indicators (RSI, ATR, ADX, MACD Slope) at the moment of entry to predict trade profitability.
- **`lstm_filter.py`**: 
  - Implements a **Long Short-Term Memory (LSTM)** network (`TensorFlow/Keras`).
  - Analyzes a "sequence" of price action (last 10 candles) leading up to a trade to capture temporal patterns.

### 4. Setup Files
- **`requirements.txt`**: 
  - Lists all Python dependencies required to run the project (e.g., `pandas`, `numpy`, `tensorflow`, `deap`, `ta`).
- **`README.md`**: 
  - This documentation file.

---

## How to Run

1. **Install Dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

2. **Run the Notebook (Recommended)**:
   - Open `final_project.ipynb` in Jupyter Notebook or VS Code.
   - Run cells sequentially to see the full pipeline in action.

3. **Run Individual Scripts (Optional)**:
   - To optimize parameters: `python ga_optimizer.py`
   - To test Random Forest: `python ml_filter.py`
   - To test LSTM: `python lstm_filter.py`

---

## Limitations & Future Considerations

### 1. Transaction Costs
- The current implementation calculates **gross returns**. In a real-world scenario, you must account for **spreads, commissions, and swap fees**, which can significantly impact the profitability of high-frequency strategies.

### 2. Overfitting & Look-Ahead Bias
- The Genetic Algorithm optimizes parameters over the entire historical dataset. Ideally, a **Walk-Forward Analysis** (optimizing on a rolling window) should be used to prevent looking into the future.
- Machine Learning models need careful validation to ensure they aren't just memorizing specific market conditions from the past.

### 3. Data Quality & Granularity
- Data is sourced from Yahoo Finance (`yfinance`), which is sufficient for proof-of-concept but may lack the precision of paid institutional feeds (e.g., tick data).
- Deep Learning models (LSTM) generally perform better with significantly larger datasets (more trade examples) than what is generated by a daily timeframe strategy.

### 4. Risk Management
- The current strategy uses a simple reversal logic (Long <-> Short). A robust system should include dynamic **Stop Loss**, **Take Profit**, and **Position Sizing** (e.g., Kelly Criterion).
